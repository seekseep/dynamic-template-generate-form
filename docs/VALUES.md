# Values 値ファイルの書き方

## 基本構造

```json
{"お名前":"山田太郎","メールアドレス":"yamada@example.com","カテゴリー":"技術サポート","メッセージ":"ログイン時にエラーが発生します。"}
```

- キーはフィールドの `name`（または `label`）
- 値はフィールドタイプに応じた形式
- チェックボックスのみ配列形式

---

## フィールドタイプと値の形式

| フィールドタイプ | 値の型 | 例 |
|-----------------|--------|-----|
| text | 文字列 | `"山田太郎"` |
| email | 文字列 | `"yamada@example.com"` |
| tel | 文字列 | `"090-1234-5678"` |
| date | 文字列（YYYY-MM-DD） | `"2024-01-15"` |
| number | 文字列 | `"10"` |
| textarea | 文字列（改行は\n） | `"1行目\n2行目"` |
| select | 文字列（選択した値） | `"東京都"` |
| radio | 文字列（選択した値） | `"メール"` |
| checkbox | 文字列の配列 | `["メール","電話"]` |

---

## 具体例

**例1: お問い合わせフォームの値**
```json
{"お名前":"山田太郎","メールアドレス":"yamada@example.com","電話番号":"090-1234-5678","カテゴリー":"技術","メッセージ":"ログイン時にエラーが発生します。\n\n症状：\n- エラーメッセージが表示される\n- 複数回試しても同じ現象"}
```

**例2: 注文フォームの値**
```json
{"商品名":"オーガニックコットンTシャツ","数量":"3","サイズ":"M","オプション":["ギフト包装","メッセージカード"],"お届け先住所":"〒100-0001\n東京都千代田区千代田1-1\n山田太郎 様","希望日":"2024-02-14"}
```

**例3: 条件付きフィールドがある場合**
```json
{"希望する連絡方法":"メール","メールアドレス":"yamada@example.com","電話番号":""}
```

**例4: value と label が異なる選択肢**
設定: `"options":[{"value":"tokyo","label":"東京都"}]` → 値ファイル: `{"都道府県":"tokyo"}`

---

## configuration.json から values.json を作成する手順

1. `form.sections` 内の全フィールドを確認
2. 各フィールドの `name`（なければ `label`）をキーとして使用
3. フィールドタイプに応じた初期値を設定:
   - text/email/tel/date/number/textarea/select/radio → `""`
   - checkbox → `[]`

---

## 値の変換ルール（テンプレートでの表示）

values.json の値は、テンプレート内の `{{変数名}}` で置換されます。

配列（チェックボックスの値）はカンマ区切りで結合されます。

値: `{"お名前":"山田太郎","趣味":["読書","映画","旅行"]}`
テンプレート: `お名前: {{お名前}}\n趣味: {{趣味}}`
出力: `お名前: 山田太郎\n趣味: 読書,映画,旅行`

---

## アプリでの操作

**値ファイルの読み込み**: アプリ上部「入力内容」→「読み込み」→ values.json を選択

**値ファイルの書き出し**: フォームに入力後「入力内容」→「書き出す」→ `{設定名}-YYYY-MM-DD.json` 形式でダウンロード

---

## トラブルシューティング

**値が読み込まれない**: キー名がフィールドの `name`/`label` と一致しているか確認

**チェックボックスの値が正しく読み込まれない**: 配列形式で指定する必要がある（`{"趣味":"読書"}` ではなく `{"趣味":["読書"]}`）

**改行が表示されない**: テキストエリアで改行を含める場合は `\n` を使用

---

## 型定義（TypeScript）

```typescript
type Values = { [fieldName: string]: string | string[]; };
```

- キー: フィールドの `name`（または `label`）
- 値: `string`（ほとんどのフィールド）または `string[]`（checkbox のみ）
